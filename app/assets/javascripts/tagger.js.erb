/**
 * Responsible for the gettig and setting of tags and tag weights
 *
 * @constructor
 */
function Tagger () {
  _this = this;

  // The list of all possible tags
  // Set in handleTags via queue call to server
  this.all_tags = [];
  
  // The tags that have been set by the user
  this.curr_tags = [
    {
      id: 1,
      name: "funny",
      weight: 40
    },
    {
      id: 2,
      name: "pics",
      weight: 10
    },
    {
      id: 3,
      name: "gifs",
      weight: 25
    },
    {
      id: 4,
      name: "videos",
      weight: 25
    }
  ];
}

Tagger.prototype.addTag = function(tag) {

  var sliderW = 200; // width of the sliders
  var thumbW = 10; // Width of the slider thumb (bug, handle, ...)

  console.log("Adding tag: " + tag.name);
  
  // temp
  var sliderData = [
    {x: sliderW/2, y: 20}
  ];

  // _this.curr_tags.push( { x: sliderW/2, y: 20 } );

  var drag = d3.behavior.drag()
      .origin(Object)
      .on("drag", dragMove)
      .on('dragend', dragEnd);

  /**
   * slider group
   * @type {svg:g}
   */
  var g = d3.select('#tagger-div')
      .selectAll('g')
      .data(sliderData)
    .enter()
      .append('g')
      .attr("height", 200)
      .attr("widht", sliderW)
      .attr('transform', 'translate(20, 10)');

  g.append('rect')
      .attr('y', function(d) { return d.y; })
      .attr("height", 4)
      .attr("width", sliderW)
      .attr('class', 'tagger-slider-bar');

  g.append("rect")
      .attr("height", 20)
      .attr("width", thumbW)
      .attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y-5; })
      .attr('class', 'tagger-slider-thumb')
      .call(drag);

  function dragMove(d) {
    d3.select(this)
    .attr("x", d.x = Math.max(0, Math.min(sliderW, d3.event.x)) - thumbW/2);
  }

  function dragEnd(d) {
    d3.select(this)
  }

  // populate the dropdowns
  // 
  // d3.select('#tag-list')
  //         .selectAll('div')
  //         .data(all_tags)
  //       .enter().append('div')
  //         .text(function(d) { return d.name; });
  // console.log(d3.select('#slider1'))
  // d3.select('#slider1').call(d3.slider().value(50));


}

// Tagger.handleTags
