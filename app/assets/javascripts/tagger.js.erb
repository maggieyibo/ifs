/**
 * Responsible for the gettig and setting of tags and tag weights
 *
 * @constructor
 */
function Tagger () {
  _this = this;

  // The tags that have been set by the user
  // [fake data]
  this.curr_tags = [
    {
      id: 1,
      name: "funny",
      weight: 40
    },
    {
      id: 2,
      name: "pics",
      weight: 10
    },
    {
      id: 3,
      name: "gifs",
      weight: 25
    },
    {
      id: 4,
      name: "videos",
      weight: 25
    }
  ];

  this.addTag = function(tag) {

    var svgH = 50;
    var sliderW = 260;
    var thumbW = 10;

    // slider data
    var sliderData = [
      {x: sliderW/2, y: 26}
    ];  

    var svg = d3.select('#tagger-div')
        .append('div')
          .append('svg')
          .attr('height', svgH)
          .attr('widht', 200);

    // tag lable
    svg.append('text')
          .text(tag.name)
          .attr('class', 'tagger-slider-label')
          .attr('transform', 'translate(10, 18)')
          .attr('font-family', 'sans-serif')
          .attr('font-size', '14px')
          .attr('fill', '#ffcc99');

    // bar
    svg.append('rect')
          .attr('class', 'tagger-slider-bar')
          .attr("height", 4)
          .attr("width", sliderW)
          .attr('transform', 'translate(20, 34)');

    // the d3 drag behavior
    var drag = d3.behavior.drag()
        .origin(function(d) { return d; })
        .on("drag", dragMove);

    // thumb
    svg.selectAll('g')
          .data(sliderData)
        .enter()
          .append('g')
          .append('rect')
          .attr('class', 'tagger-slider-thumb')
          .attr("height", 20)
          .attr("width", thumbW)
          .attr('transform', function(d) {
            return 'translate(' + d.x + ', ' + d.y + ')';
          })
          .call(drag);
    


    function dragMove(d) {
      console.log(d.x);
      d3.select(this)
        // .attr("x", d.x = d3.event.x - thumbW/2);
      .attr("x", d.x = Math.max(0, Math.min(sliderW, d3.event.x)) - thumbW/2);
    }
  };
}





////










  // var sliderW = 200; // width of the sliders
  // var thumbW = 10; // Width of the slider thumb (bug, handle, ...)

  
  // var sliderData = [
  //   {x: sliderW/2, y: 20}
  // ];

  // var svg = d3.select('#tagger-div')
  //       .append('div')
  //       .append('svg')
  //         .attr('height', 40)
  //         .attr('widht', 200)
  //       .append('text')
  //         .text(tag.name)
  //         .attr('transform', 'translate(10, 24)')
  //         .attr("font-family", "sans-serif")
  //         .attr("font-size", "14px")
  //         .attr("fill", "orange")
  //       .selectAll('g')
  //       .data(sliderData)
  //     .enter()
  //       .append('g')
  //         .attr('height', 200)
  //         .attr('widht', sliderW)
  //         .attr('transform', 'translate(20, 10)')
  //       .append('rect')
  //         .attr('y', function(d) { return d.y; })
  //         .attr("height", 4)
  //         .attr("width", sliderW)
  //         .attr('class', 'tagger-slider-bar');

////

  // // temp
  // var sliderData = [
  //   {x: sliderW/2, y: 20}
  // ];

  // // _this.curr_tags.push( { x: sliderW/2, y: 20 } );

  // var drag = d3.behavior.drag()
  //     .origin(Object)
  //     .on("drag", dragMove)
  //     .on('dragend', dragEnd);

  // /**
  //  * slider group
  //  * @type {svg:g}
  //  */
  // var g = d3.select('#tagger-div')
  //     .selectAll('g')
  //     .data(sliderData)
  //   .enter()
  //     .append('g')
  //     .attr("height", 200)
  //     .attr("widht", sliderW)
  //     .attr('transform', 'translate(20, 10)');


  // g.append("rect")
  //     .attr("height", 20)
  //     .attr("width", thumbW)
  //     .attr("x", function(d) { return d.x; })
  //     .attr("y", function(d) { return d.y-5; })
  //     .attr('class', 'tagger-slider-thumb')
  //     .call(drag);



  // populate the dropdowns
  // 
  // d3.select('#tag-list')
  //         .selectAll('div')
  //         .data(all_tags)
  //       .enter().append('div')
  //         .text(function(d) { return d.name; });
  // console.log(d3.select('#slider1'))
  // d3.select('#slider1').call(d3.slider().value(50));




// Tagger.handleTags
